<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Animal Kingdom</title>
		<link rel="stylesheet" href="styles.css" />
		<script src="https://unpkg.com/lucide@latest"></script>
		<script type="module" src="/src/main.ts"></script>
	</head>
	<body>
		<button id="theme-toggle-btn" class="theme-toggle" title="Toggle theme"><i data-lucide="moon"></i></button>
		<button id="mute-toggle-btn" class="mute-toggle" title="Toggle sound (M)">
			<i data-lucide="volume-2"></i>
		</button>

		<header>
			<img src="logo.png" alt="Animal Kingdom Logo" class="logo" />
		</header>

		<main>
			<div id="setup-screen">
				<h2>Game Setup</h2>

				<div class="mode-selection">
					<button id="standard-mode-btn" class="mode-btn active">
						<i data-lucide="users"></i><span>Standard Battle</span>
					</button>
					<button id="challenger-mode-btn" class="mode-btn">
						<i data-lucide="trophy"></i><span>New Challenger</span>
					</button>
				</div>

				<div class="animal-abilities-section collapsed">
					<div class="abilities-header">
						<h3>Animal Abilities</h3>
						<button id="toggle-abilities-btn" class="toggle-abilities-btn">
							<i data-lucide="chevron-down"></i><span>Show Abilities</span>
						</button>
					</div>
					<div class="abilities-list hidden"></div>
				</div>

				<div id="standard-setup">
					<div class="setup-section">
						<label for="player-count">Number of Players:</label>
						<select id="player-count">
							<option value="2">2</option>
							<option value="3">3</option>
							<option value="4">4</option>
							<option value="5">5</option>
							<option value="6">6</option>
							<option value="7">7</option>
							<option value="8">8</option>
							<option value="9">9</option>
							<option value="10">10</option>
						</select>
					</div>
					<div id="player-selections" class="setup-section"></div>
				</div>

				<div id="challenger-setup" class="setup-section" style="display: none">
					<div class="challenger-selection">
						<h3>Choose Your Fighter</h3>
						<div id="unlocked-animals-grid"></div>
					</div>
					<div class="challenger-opponent">
						<h3>Your Opponent</h3>
						<div id="challenger-opponent-display"></div>
					</div>
				</div>
				<button id="start-game-btn"><i data-lucide="play"></i>Start Game</button>
			</div>

			<div id="game-screen">
				<div id="players-container"></div>
				<div id="game-interface">
					<div id="controls-container">
						<div id="turn-indicator">Player 1's Turn</div>
						<div class="action-buttons">
							<button class="action-btn" data-action="attack">
								<i data-lucide="crosshair"></i><span><u>A</u>ttack</span>
							</button>
							<button class="action-btn" data-action="ability">
								<i data-lucide="sparkles"></i><span>Use A<u>b</u>ility</span>
							</button>
							<button class="action-btn" data-action="heal">
								<i data-lucide="heart"></i><span><u>H</u>eal (1 left)</span>
							</button>
							<button class="action-btn" data-action="shield">
								<i data-lucide="shield-check"></i><span><u>S</u>hield (1 left)</span>
							</button>
							<button class="action-btn" data-action="nothing">
								<i data-lucide="pause"></i><span>Do <u>N</u>othing</span>
							</button>
						</div>
						<button id="undo-btn" class="undo-btn" title="Undo last turn (U)">
							<i data-lucide="undo"></i><span><u>U</u>ndo</span>
						</button>
					</div>
					<div id="log-container">
						<h3>Game Log</h3>
						<div id="game-log"></div>
						<div class="log-buttons">
							<button id="copy-log-btn"><i data-lucide="clipboard-copy"></i>Copy to Clipboard</button>
							<button id="save-log-btn"><i data-lucide="download"></i>Save Log</button>
						</div>
					</div>
				</div>
			</div>

			<div id="game-over-screen">
				<div class="game-over-modal">
					<h2 id="winner-announcement"></h2>
					<div class="button-group">
						<button id="play-again-btn" class="primary"><i data-lucide="refresh-cw"></i>Play Again</button>
						<button id="view-log-btn"><i data-lucide="eye"></i>View Log</button>
						<button id="copy-log-game-over-btn">
							<i data-lucide="clipboard-copy"></i>Copy to Clipboard
						</button>
						<button id="save-log-game-over-btn"><i data-lucide="download"></i>Save Log</button>
					</div>
				</div>
			</div>

			<div id="fullscreen-log-modal">
				<div class="fullscreen-log-container">
					<div class="fullscreen-log-header">
						<h2>Game Log</h2>
						<button id="close-fullscreen-log-btn"><i data-lucide="x"></i>Close</button>
					</div>
					<div id="fullscreen-log-content"></div>
					<div class="fullscreen-log-actions">
						<button id="copy-log-fullscreen-btn">
							<i data-lucide="clipboard-copy"></i>Copy to Clipboard
						</button>
						<button id="save-log-fullscreen-btn"><i data-lucide="download"></i>Save Log</button>
					</div>
				</div>
			</div>

			<div id="keyboard-shortcuts-modal">
				<div class="shortcuts-modal">
					<h2>Keyboard Shortcuts</h2>
					<table>
						<tr>
							<td>A</td>
							<td>Attack</td>
						</tr>
						<tr>
							<td>B</td>
							<td>Use Ability</td>
						</tr>
						<tr>
							<td>H</td>
							<td>Heal</td>
						</tr>
						<tr>
							<td>S</td>
							<td>Shield</td>
						</tr>
						<tr>
							<td>N</td>
							<td>Do Nothing</td>
						</tr>
						<tr>
							<td>U</td>
							<td>Undo</td>
						</tr>
						<tr>
							<td>M</td>
							<td>Toggle Mute</td>
						</tr>
						<tr>
							<td>?</td>
							<td>Show this help</td>
						</tr>
						<tr>
							<td>Esc</td>
							<td>Close this help</td>
						</tr>
					</table>
					<button id="close-shortcuts-btn"><i data-lucide="x"></i>Close</button>
				</div>
			</div>
		</main>
	</body>
</html>
